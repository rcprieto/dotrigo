<!-- <img src="./assets/images/logodotrigo_pq.png"> -->

<!-- Container principal que simula a tela de um celular -->
<div class="font-sans antialiased bg-gray-100 flex justify-center items-start min-h-screen ">
	<div class="w-full max-w-lg bg-white shadow-2xl rounded-2xl overflow-hidden" style="min-height: 80vh;">

		<!-- Cabeçalho Fixo -->
		<header class="sticky top-0 bg-white shadow-md z-10">
			<div class="container mx-auto px-4 py-3 flex justify-between items-center">
				<!-- Logo -->
				<h1 class="text-3xl font-bold text-yellow-900" style="font-family: 'Merriweather', serif;">
					dotrigo
				</h1>

				<!-- Ícones de Navegação -->
				<div class="flex items-center space-x-4">

				</div>
			</div>

			<!-- Navegação de Categorias (Apenas na página do menu) -->
			<nav class="bg-yellow-50 overflow-x-auto">
				<ul class="flex space-x-2 px-4 py-2">
					<li><button (click)="navegarPara('produtos')" [class.active]="categoriaAtiva() === 'produtos'" class="nav-button">Produtos</button></li>
					<li><button (click)="navegarPara('pedidos')" [class.active]="categoriaAtiva() === 'pedidoss'" class="nav-button">Pedidos</button></li>
					<li style="width: 200px;"></li>
				</ul>
			</nav>
		</header>
		<main class="principal">
			@if(categoriaAtiva() == "produtos")
			{
			<div class="row">
				<div class="col">
					<button class="btn btn-dark" (click)="mostrarCadastro.set(!mostrarCadastro())" type="button"><i class="fal fa-plus"></i> Novo</button>
				</div>
				<div class="col">
					<input type="text" class="form-control" placeholder="Buscar..." (keyup)="filtrar($event)">
				</div>
			</div>

			@if(mostrarCadastro())
			{
			<div class="row mt-3 ">
				<div class="col">
					Produto: <input type="text" [(ngModel)]="itemCadastro().nome" class="form-control">
				</div>
			</div>
			<div class="row mt-3 ">
				<div class="col">
					Descrição: <input type="text" [(ngModel)]="itemCadastro().descricao" class="form-control">
				</div>
			</div>
			<div class="row mt-3">
				<div class="col">Ativo: <input type="checkbox" [(ngModel)]="itemCadastro().ativo"></div>
				<div class="col">Pronta Entrega: <input type="checkbox" [(ngModel)]="itemCadastro().prontaEntrega"></div>
			</div>
			<div class="row mt-3">
				<div class="col">Categoria:
					<select [(ngModel)]="itemCadastro().categoriaId" class="form-select">
						<option value="null">Selecione...</option>
						@for (item of categorias(); track $index) {
						<option [value]="item.id">{{item.nome}}</option>
						}
					</select>
				</div>
			</div>
			<div class="row mt-3">
				<div class="col">Arquivo Foto: <input type="file" (change)="onFileSelected($event)" class="form-control">
				</div>
			</div>
			<div class="row mt-3">
				<div class="col">Preço:
					<input type="text" [(ngModel)]="itemCadastro().preco" class="form-control">
				</div>
				<div class="col">Peso:
					<input type="text" [(ngModel)]="itemCadastro().peso" class="form-control">
				</div>
			</div>

			<div class="row mt-3">
				<div class="col">Tamanho:
					<input type="text" [(ngModel)]="itemCadastro().tamanho" class="form-control">
				</div>
				<div class="col">Tempo Entrega: <input type="text" [(ngModel)]="itemCadastro().tempoPreparo" class="form-control"></div>
			</div>
			<div class="row mt-3">

				<div class="col">Estoque: <input type="number" [(ngModel)]="itemCadastro().estoque" class="form-control"></div>
			</div>


			<div class="row mt-3">
				<div class="col-6 justify-end flex">
					<button class="btn btn-success" type="button" (click)="salvar()"><i class="fal fa-floppy-disk"></i> Salvar</button>
				</div>
				<div class="col-6  flex">
					<button class="btn btn-danger" type="button" (click)="cancelar()"><i class="fal fa-cancel"></i> Cancelar</button>
				</div>
			</div>

			}@else {
			<div class="mt-3">

				@for (item of produtos(); track $index) {
				<div class="card mb-2">
					<div class="card-header">{{item.nome}}
						<i class="fal fa-edit" (click)="editar(item)"></i>
					</div>

					<div class="card-body">
						<div class="row">
							<div class="col">
								{{item.descricao}}
								<br>
								{{ item.preco | currency:"BRL"}}<br>
								{{ item.tamanho}}
							</div>
						</div>
					</div>
				</div>
				}

			</div>
			}

			}
		</main>
	</div>
</div>